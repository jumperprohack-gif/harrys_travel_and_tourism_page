<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Travel And Tourism</title>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg: rgba(0,0,0,0.85);
  --text: #ffffff;
  --accent: #4fc3f7;
  --font: 16px;
}

body{
  margin:0;
  font-family:Arial, sans-serif;
  color:var(--text);
  font-size:var(--font);
  background:url("travel_the_world.jpg") no-repeat center center fixed;
  background-size:cover;
}

.high-contrast{
  --bg:#000;
  --text:#ffff00;
  --accent:#00ffff;
}

.large-text{
  --font:20px;
}

#siteTitle{
  position:fixed;
  top:15px;
  left:20px;
  font-size:46px;
  font-weight:bold;
  text-shadow:3px 3px 8px black;
  z-index:1000;
}

section{
  max-width:1000px;
  margin:120px auto;
  padding:20px;
  background:var(--bg);
  border-radius:12px;
}

button,select,input{
  padding:10px;
  margin:6px;
  border-radius:6px;
  border:none;
}

button{
  background:var(--accent);
  cursor:pointer;
}

table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  border:1px solid #555;
  padding:8px;
  text-align:center;
}

#secretBtn{
  position:fixed;
  bottom:0;
  right:0;
  width:50px;
  height:50px;
  opacity:0;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="siteTitle">Travel And Tourism</div>

<!-- LOGIN -->
<section id="login">
  <h2>ğŸ” Access Required</h2>
  <p>Please enter the access code</p>
  <input type="password" id="loginCode" placeholder="Enter code">
  <button onclick="checkLogin()">Enter</button>
  <p>Or <button onclick="showTeacherLogin()">Teacher Login</button></p>
</section>

<!-- TEACHER LOGIN -->
<section id="teacherLogin" style="display:none">
  <h2>ğŸ‘©â€ğŸ« Teacher Login</h2>
  <input type="password" id="teacherCodeInput" placeholder="Teacher code">
  <button onclick="checkTeacher()">Login</button>
  <button onclick="backToLogin()">Back</button>
</section>

<!-- HOME -->
<section id="home" style="display:none">
  <h2>Welcome</h2>
  <select id="difficulty">
    <option value="">Select Difficulty</option>
    <option value="easy">Easy</option>
    <option value="medium">Medium</option>
    <option value="hard">Hard</option>
  </select><br>

  <button onclick="showPlanner()">ğŸ§³ Trip Planner</button>
  <button onclick="showGuess()">ğŸ§­ Guess the Destination</button><br><br>

  <button onclick="toggleContrast()">High Contrast</button>
  <button onclick="toggleText()">Large Text</button>
  <button onclick="logout()">Logout</button>
</section>

<!-- PLANNER -->
<section id="planner" style="display:none">
  <h2>ğŸ§³ Trip Planner</h2>
  <p id="budgetText">Budget: Â£0</p>

  <select id="destinationSelect">
    <option value="0">Destination</option>
    <option value="500">Paris</option>
    <option value="700">New York</option>
    <option value="400">Barcelona</option>
    <option value="600">Dubai</option>
  </select>

  <select id="transportSelect">
    <option value="0">Transport</option>
    <option value="300">Plane</option>
    <option value="150">Train</option>
    <option value="100">Coach</option>
  </select>

  <select id="accommodationSelect">
    <option value="0">Accommodation</option>
    <option value="600">Hotel</option>
    <option value="400">Hostel</option>
    <option value="500">Apartment</option>
  </select>

  <p>
    <input id="plannerName" placeholder="Your Name">
    <input id="plannerClass" placeholder="Your Class">
  </p>

  <p id="plannerResult"></p>
  <button onclick="finishPlanner()">Finish</button>
  <button onclick="backHome()">Back</button>
  <button onclick="logout()">Logout</button>
</section>

<!-- GUESS GAME -->
<section id="guessGame" style="display:none">
  <h2>ğŸ§­ Guess the Destination</h2>
  <p id="roundText"></p>
  <ul id="clues"></ul>
  <select id="guess"></select><br>
  <button onclick="submitGuess()">Submit</button>
  <button onclick="logout()">Logout</button>
</section>

<!-- END -->
<section id="end" style="display:none">
  <h2>Final Score</h2>
  <p id="scoreText"></p>

  <input id="studentName" placeholder="Name">
  <input id="studentClass" placeholder="Class">
  <button onclick="saveScore()">Save Score</button>
  <button onclick="backHome()">Back</button>
  <button onclick="logout()">Logout</button>
</section>

<!-- LEADERBOARDS -->
<section id="leaderboards" style="display:none">
  <h2>ğŸ† Leaderboards</h2>
  <h3>Easy</h3><ul id="easyBoard"></ul>
  <h3>Medium</h3><ul id="mediumBoard"></ul>
  <h3>Hard</h3><ul id="hardBoard"></ul>
  <button onclick="backHome()">Home</button>
  <button onclick="logout()">Logout</button>
</section>

<!-- TEACHER -->
<section id="teacherSuite" style="display:none">
  <h2>ğŸ‘©â€ğŸ« Teacher Score Table</h2>
  <table>
    <thead>
      <tr><th>Name</th><th>Class</th><th>Score</th><th>Difficulty</th><th>Date</th><th>Time (s)</th></tr>
    </thead>
    <tbody id="teacherTable"></tbody>
  </table>
  <canvas id="scoreChart" width="400" height="200"></canvas>
  <canvas id="difficultyChart" width="400" height="200"></canvas>
  <h3>Trip Planner Scores</h3>
  <canvas id="plannerChart" width="400" height="200"></canvas>
  <button onclick="backToLogin()">Back</button>
  <button onclick="logout()">Logout</button>
</section>

<!-- OWNER -->
<section id="ownerSuite" style="display:none">
  <h2>ğŸ”’ Ownerâ€™s Suite</h2>
  <button onclick="showTeacherSuite()">View Teacher Table</button>
  <button onclick="logoutAll()">Logout All</button>
  <button onclick="location.reload()">Exit</button>
</section>

<div id="secretBtn" onclick="ownerAccess()"></div>

<script>
const LOGIN_CODE="SSS123";
const TEACHER_CODE="SSSTEACHER26";
const OWNER_CODE="1224";

let score=0, round=0, maxRounds=5, clueLimit=4, points=20;
let selected=[];
let difficulty="easy";
let startTime, endTime;
let isLoggedIn=false;
let plannerBudget=0;

const destinations=[
 {a:"Paris",c:["Eiffel Tower","Euro","Croissants","Spring","Romantic"]},
 {a:"Tokyo",c:["Yen","Sushi","Technology","Humid","Cherry Blossoms"]},
 {a:"Dubai",c:["Hot","Burj Khalifa","Dirham","Luxury","Desert"]},
 {a:"London",c:["Pound","Big Ben","Museums","Mild","Royal Family"]},
 {a:"New York",c:["Dollar","Statue of Liberty","Skyscrapers","Autumn","Broadway"]},
 {a:"Rome",c:["Colosseum","Pizza","Euro","Historic","Mediterranean"]},
 {a:"Sydney",c:["Opera House","AUD","Beaches","Summer","Harbour"]}
];

// ===== LOGIN =====
function checkLogin(){
  if(loginCode.value===LOGIN_CODE){
    isLoggedIn=true;
    login.style.display="none";
    home.style.display="block";
  } else alert("Incorrect code");
}

function showTeacherLogin(){ 
  login.style.display="none"; 
  teacherLogin.style.display="block"; 
}

function checkTeacher(){
  if(teacherCodeInput.value===TEACHER_CODE){
    teacherLogin.style.display="none";
    showTeacherSuite();
  } else alert("Incorrect teacher code");
}

function backToLogin(){
  document.querySelectorAll("section").forEach(s=>s.style.display="none");
  login.style.display="block";
}

// ===== LOGOUT =====
function logout(){
  isLoggedIn=false;
  score=0; round=0; selected=[];
  document.querySelectorAll("section").forEach(s=>s.style.display="none");
  login.style.display="block";
}

function logoutAll(){
  if(confirm("Clear all saved scores and log out everyone?")){
    localStorage.removeItem("scores");
    localStorage.removeItem("plannerScores");
    location.reload();
  }
}

// ===== PLANNER =====
function showPlanner(){ 
  home.style.display="none"; 
  planner.style.display="block"; 

  plannerBudget = Math.floor(Math.random()*(5000-1500+1))+1500;
  document.getElementById('budgetText').innerText=`Budget: Â£${plannerBudget}`;
}

function finishPlanner(){
  const selects=[destinationSelect,transportSelect,accommodationSelect];
  let plannerScore=0;
  selects.forEach(s=>{ if(s.value!=="0") plannerScore++; });
  let scaledScore=Math.round((plannerScore/selects.length)*5);

  const name=plannerName.value||"Anonymous";
  const studentClass=plannerClass.value||"Unknown";

  alert(`Trip Planner completed! Score: ${scaledScore}/5`);

  const plannerScores=JSON.parse(localStorage.getItem('plannerScores')||"[]");
  plannerScores.push({ n:name, c:studentClass, s:scaledScore, max:5, t:new Date().toLocaleString() });
  localStorage.setItem('plannerScores',JSON.stringify(plannerScores));

  backHome();
}

// ===== GUESS GAME =====
function showGuess(){
  difficulty=difficultySelect();
  score=0; round=0; startTime=new Date();
  selected=[...destinations].sort(()=>Math.random()-0.5).slice(0,maxRounds);
  home.style.display="none"; guessGame.style.display="block";
  loadRound();
}

function difficultySelect(){
  const d=document.getElementById("difficulty").value;
  if(d==="medium"){maxRounds=7;clueLimit=3;points=15;}
  else if(d==="hard"){maxRounds=10;clueLimit=2;points=10;}
  else {maxRounds=5;clueLimit=4;points=20;}
  return d||"easy";
}

// ===== REAL DIFFICULTY ROUND LOADING =====
function loadRound(){
  if(round>=selected.length){ endGame(); return; }

  roundText.innerText=`Round ${round+1}/${selected.length}`;

  let cluesToShow = selected[round].c.slice(0, clueLimit);

  // Add decoy clues for medium/hard
  if(difficulty === "medium"){
    const decoys = ["Food", "Music", "Beach", "River", "Mountain"];
    cluesToShow = [...cluesToShow, decoys[Math.floor(Math.random()*decoys.length)]];
    cluesToShow.sort(() => Math.random() - 0.5);
  } else if(difficulty === "hard"){
    const decoys = ["Sun", "Moon", "Car", "Book", "Festival"];
    cluesToShow = [cluesToShow[0]||"", decoys[Math.floor(Math.random()*decoys.length)]];
    cluesToShow.sort(() => Math.random() - 0.5);
  }

  clues.innerHTML = cluesToShow.map(x=>"<li>"+x+"</li>").join("");

  // Shuffle answer options so correct answer isnâ€™t always last
  const shuffledOptions = destinations.map(d=>d.a).sort(() => Math.random() - 0.5);
  guess.innerHTML="<option>Select</option>"+shuffledOptions.map(x=>`<option>${x}</option>`).join("");
}

function submitGuess(){
  score += (guess.value===selected[round].a)? points : -5;
  round++; loadRound();
}

function endGame(){
  guessGame.style.display="none";
  end.style.display="block";
  endTime=new Date();
  const timeSpent=Math.floor((endTime-startTime)/1000);
  scoreText.innerText=`Score: ${score} (${difficulty}) | Time: ${timeSpent} sec`;
}

// ===== SAVE SCORE =====
function saveScore(){
  const data=JSON.parse(localStorage.getItem("scores")||"[]");
  const timeSpent=Math.floor((endTime-startTime)/1000);
  data.push({ n:studentName.value, c:studentClass.value, s:score, d:difficulty, t:new Date().toLocaleString(), time:timeSpent });
  localStorage.setItem("scores",JSON.stringify(data));
  showBoards();
}

function showBoards(){
  end.style.display="none"; leaderboards.style.display="block";
  ["easy","medium","hard"].forEach(d=>{
    const list=JSON.parse(localStorage.getItem("scores")||"[]").filter(x=>x.d===d)
      .sort((a,b)=>b.s-a.s).slice(0,5);
    document.getElementById(d+"Board").innerHTML=list.map(x=>`<li>${x.n} (${x.s})</li>`).join("");
  });
}

// ===== TEACHER =====
function showTeacherSuite(){
  teacherSuite.style.display="block";
  teacherTable.innerHTML="";
  const scores=JSON.parse(localStorage.getItem("scores")||"[]");
  scores.forEach(x=>{
    teacherTable.innerHTML+=`<tr><td>${x.n}</td><td>${x.c}</td><td>${x.s}</td><td>${x.d}</td><td>${x.t}</td><td>${x.time||0}</td></tr>`;
  });

  // Guess Game Score Chart
  const ctx=document.getElementById('scoreChart').getContext('2d');
  new Chart(ctx,{
    type:'bar',
    data:{
      labels:scores.map(x=>x.n),
      datasets:[{ label:'Guess Game Score', data:scores.map(x=>x.s), backgroundColor:'rgba(79,195,247,0.7)' }]
    }
  });

  // Difficulty Pie Chart
  const diffCounts={easy:0, medium:0, hard:0};
  scores.forEach(x=>diffCounts[x.d]++);
  const ctx2=document.getElementById('difficultyChart').getContext('2d');
  new Chart(ctx2,{
    type:'pie',
    data:{
      labels:['Easy','Medium','Hard'],
      datasets:[{ data:[diffCounts.easy,diffCounts.medium,diffCounts.hard], backgroundColor:['#4fc3f7','#f7b74f','#f74f4f'] }]
    }
  });

  // Trip Planner Chart
  const plannerScores=JSON.parse(localStorage.getItem('plannerScores')||"[]");
  const ctx3=document.getElementById('plannerChart').getContext('2d');
  new Chart(ctx3,{
    type:'bar',
    data:{
      labels:plannerScores.map(x=>x.n),
      datasets:[{ label:'Trip Planner Score (out of 5)', data:plannerScores.map(x=>x.s), backgroundColor:'rgba(247,79,158,0.7)' }]
    },
    options:{ scales:{ y:{ beginAtZero:true, max:5 } } }
  });
}

// ===== OWNER =====
function ownerAccess(){
  const c=prompt("Code please");
  if(c===OWNER_CODE){ home.style.display="none"; ownerSuite.style.display="block"; }
}

// ===== STYLE =====
function toggleContrast(){ document.body.classList.toggle("high-contrast"); }
function toggleText(){ document.body.classList.toggle("large-text"); }
function backHome(){
  document.querySelectorAll("section").forEach(s=>s.style.display="none");
  if(isLoggedIn) home.style.display="block";
  else login.style.display="block";
}
</script>

</body>
</html>
